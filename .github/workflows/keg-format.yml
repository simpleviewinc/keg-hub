
name: keg-format
on: push

jobs:
  tests:
    name: 'Format Repo Code'
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - name: "Get Changed Files"
        id: get-changed-files
        shell: bash
        run: bash scripts/ci/getChangedFiles.sh
      - name: "Get Changed Repos"
        id: get-changed-repos
        shell: bash
        run: bash scripts/ci/getChangedRepos.sh
      - name: "Run Repo Format"
        id: run-repo-format
        shell: bash
        run: bash scripts/ci/runYarnCmd.sh "format"
      - name: "Commit Repo Changes"
        id: commit-changes
        shell: bash
        run: bash scripts/ci/commitChanges.sh