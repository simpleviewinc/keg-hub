{"version":3,"file":"button.js","sources":["../../../src/components/button/button.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { get, isNum } from '@keg-hub/jsutils'\nimport { Touchable } from '../touchable'\nimport { Text } from '../typography/text'\nimport { useThemePath } from '../../hooks'\nimport { useThemeHover, useThemeActive } from '@keg-hub/re-theme'\nimport { getActiveOpacity, getPressHandler, renderFromType } from '../../utils'\nimport { useThemeTypeAsClass } from 'KegTypeAsClass'\n\n/**\n * Finds the child type and formats it in the proper type to be rendered\n * @param {Object|Array|string} Children - React components to render\n * @param {Object} props\n * @param {Object} props.styles - Custom styles passed into the component as a prop\n * @param {boolean} props.selectable - whether the text content is selectable or not\n *\n * @returns {React Component|Object|Array}\n */\nconst getChildren = (Children, { styles, selectable }) => {\n  return renderFromType(Children, { style: styles?.content, selectable }, Text)\n}\n\nconst checkDisabled = (mainStyles, btnStyles, disabled) => {\n  return disabled\n    ? { ...mainStyles, ...get(btnStyles, 'disabled.main') }\n    : mainStyles\n}\n\n/**\n * Button\n * @summary Custom button component. All props are optional\n *\n * @param {Object} props - see buttonPropTypes\n * @property {String} props.text - button text\n * @property {String} props.type - flat, text, outlined, contained; default 'flat'\n * @property {Object} props.style - custom style\n * @property {Function} props.onPress - function to do when button is pressed\n * @property {Boolean} [props.showFeedback=false] - Should opacity feebBack be shown when the button is pressed\n * @property {Boolean} props.disabled\n * @property {Object} props.children\n * @property {Number=} props.activeOpacity - add opacity value to active state\n * @property {Boolean=} props.disabled - disable button interaction. default false\n * @property {Boolean=} props.selectable - whether the button text is selectable or not. default false\n * @property {Object} props.ref - reference to native element\n *\n */\nexport const Button = React.forwardRef((props, ref) => {\n  const {\n    className,\n    children,\n    content,\n    onClick,\n    onPress,\n    styles,\n    showFeedback = false,\n    type = 'default',\n    themePath,\n    activeOpacity,\n    disabled = false,\n    selectable = false,\n    ...elProps\n  } = props\n\n  const btnStyles = useThemePath(\n    themePath || `button.contained.${type}`,\n    styles\n  )\n\n  const [ hoverRef, hoverStyles ] = useThemeHover(\n    get(btnStyles, 'default', {}),\n    get(btnStyles, 'hover'),\n    { ref }\n  )\n\n  const [ themeRef, themeStyles ] = useThemeActive(\n    hoverStyles,\n    get(btnStyles, 'active'),\n    { ref: hoverRef }\n  )\n\n  return (\n    <Touchable\n      accessibilityRole='button'\n      className={useThemeTypeAsClass(\n        themePath || type,\n        'keg-button',\n        className\n      )}\n      {...elProps}\n      disabled={disabled}\n      touchRef={themeRef}\n      showFeedback={isNum(activeOpacity) || showFeedback}\n      style={checkDisabled(themeStyles.main, btnStyles, disabled)}\n      children={getChildren(children || content, {\n        styles: themeStyles,\n        selectable,\n      })}\n      {...getPressHandler(false, onClick, onPress)}\n      {...getActiveOpacity(false, props, btnStyles)}\n    />\n  )\n})\n\nButton.propTypes = {\n  ...Touchable.propTypes,\n  children: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.string,\n    PropTypes.array,\n    PropTypes.func,\n  ]),\n  content: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.string,\n    PropTypes.array,\n    PropTypes.func,\n  ]),\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func,\n  onPress: PropTypes.func,\n  styles: PropTypes.object,\n  themePath: PropTypes.string,\n  selectable: PropTypes.bool,\n  activeOpacity: PropTypes.number,\n  showFeedback: PropTypes.bool,\n}\n"],"names":["getChildren","Children","styles","selectable","renderFromType","style","content","Text","checkDisabled","mainStyles","btnStyles","disabled","get","Button","React","forwardRef","props","ref","className","children","onClick","onPress","showFeedback","type","themePath","activeOpacity","elProps","useThemePath","useThemeHover","hoverRef","hoverStyles","useThemeActive","themeRef","themeStyles","useThemeTypeAsClass","isNum","main","getPressHandler","getActiveOpacity"],"mappings":"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"}