{"version":3,"file":"linearGradient.js","sources":["../../../src/components/linearGradient/linearGradient.js"],"sourcesContent":["import React, { useState, useCallback } from 'react'\nimport { View } from 'KegView'\nimport { useClassList } from 'KegClassList'\nimport { noPropArr } from '@keg-hub/jsutils'\nimport PropTypes from 'prop-types'\n\n/**\n * converted from https://github.com/react-native-web-community/react-native-web-linear-gradient\n * see this link for detailed info on each prop\n *     - https://github.com/https://docs.expo.io/versions/latest/sdk/linear-gradient/\n *\n * @param {object} props\n * @param {Array=} props.locations - An optional array of numbers defining the location of each gradient color stop\n * @param {Array} props.colors - An array of at least two color values that represent gradient colors. Example: ['red', 'blue']\n * @param {{x: number, y:number}=} props.start - An optional object of the following type: { x: number, y: number }\n * @param {{x: number, y:number}=} props.end - Same as start, but for the end of the gradient.\n * @param {boolean=} props.useAngle - used to turn on/off angle based calculation (as opposed to start/end). uses angleCenter and angle prop\n * @param {{x: number, y:number}=} props.angleCenter - the center point of the angle\n * @param {Number} props.angle - is the angle in degrees\n * @param {Component} props.children\n * @param {object} props.style\n * @param {string=} props.className\n */\nexport const LinearGradient = props => {\n  const {\n    start = {\n      x: 0.5,\n      y: 0,\n    },\n    end = {\n      x: 0.5,\n      y: 1,\n    },\n    colors = noPropArr,\n    locations = noPropArr,\n    useAngle = false,\n    angleCenter,\n    angle = 0,\n    style,\n    children,\n    className,\n    ...otherProps\n  } = props\n\n  const [ width, setWidth ] = useState(1)\n  const [ height, setHeight ] = useState(1)\n\n  const measure = useCallback(\n    ({ nativeEvent }) => {\n      setWidth(nativeEvent.layout.width)\n      setHeight(nativeEvent.layout.height)\n    },\n    [ setWidth, setHeight ]\n  )\n\n  const newAngle =\n    useAngle && angle\n      ? `${angle}deg`\n      : calculateAngle(width, height, start, end)\n\n  return (\n    <View\n      className={useClassList(`keg-linear-gradient`, className)}\n      {...otherProps}\n      style={[\n        style,\n        {\n          backgroundImage: `linear-gradient(${newAngle},${getColors(\n            colors,\n            locations\n          )})`,\n        },\n      ]}\n      onLayout={measure}\n    >\n      { children }\n    </View>\n  )\n}\n\n/**\n * calculateAngle\n * @param {Number} width\n * @param {Number} height\n * @param {{x: number, y:number}=} start - An optional object of the following type: { x: number, y: number }\n * @param {{x: number, y:number}=} end - Same as start, but for the end of the gradient.\n */\nconst calculateAngle = (width, height, start, end) => {\n  // Math.atan2 handles Infinity\n  const newAngle =\n    Math.atan2(width * (end.y - start.y), height * (end.x - start.x)) +\n    Math.PI / 2\n  return newAngle + 'rad'\n}\n/**\n * getColors\n * @param {Array} colors - array of valid colors\n * @param {Array} locations - array of numbers defining the location of each gradient color stop\n */\nconst getColors = (colors = noPropArr, locations = noPropArr) => {\n  return colors\n    .map((color, index) => {\n      const location = locations[index]\n      let locationStyle = ''\n      if (location) {\n        locationStyle = ' ' + location * 100 + '%'\n      }\n      return color + locationStyle\n    })\n    .join(',')\n}\n\nLinearGradient.propTypes = {\n  locations: PropTypes.array,\n  colors: PropTypes.array,\n  start: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n  }),\n  end: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n  }),\n  useAngle: PropTypes.bool,\n  angleCenter: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n  }),\n  angle: PropTypes.number,\n  children: PropTypes.oneOfType([ PropTypes.func, PropTypes.elementType ]),\n  style: PropTypes.object,\n  className: PropTypes.string,\n}\n"],"names":["LinearGradient","props","start","x","y","end","colors","noPropArr","locations","useAngle","angleCenter","angle","style","children","className","otherProps","useState","width","setWidth","height","setHeight","measure","useCallback","nativeEvent","layout","newAngle","calculateAngle","React","useClassList","backgroundImage","getColors","Math","atan2","PI","map","color","index","location","locationStyle","join"],"mappings":"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"}