{"version":3,"file":"touchable.js","sources":["../../../src/components/touchable/touchable.native.js"],"sourcesContent":["import React, { useCallback, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { Pressable } from 'react-native'\nimport { useClassName } from 'KegClassName'\nimport { checkCall, noOpObj } from '@keg-hub/jsutils'\n\n/**\n * Touchable\n * @summary Custom Touch component. All props are optional\n *\n * @param {Object} props - see touchablePropTypes\n * @property {String} props.className - Value to set the className to (web platform only)\n * @property {Object} props.style - custom style - Set inline with the style prop\n * @property {Function} props.onPress - function to do when button is pressed\n * @property {Object} props.children - Child components of the component\n * @property {Object} props.ref - reference to native element\n * @property {Number=} props.activeOpacity - active opacity value. default 0.4\n * @property {Function=} props.onPress - called after onPressOut\n * @property {Function=} props.onPressIn - called on touch. before OnPress\n * @property {Function=} props.onPressOut - called when touch is released\n * @property {Boolean=} props.showFeedback - enable/disable active style opacity. default true\n */\nexport const Touchable = React.forwardRef((props, ref) => {\n  const {\n    className,\n    showFeedback = true,\n    touchRef,\n    onPress,\n    onPressIn,\n    onPressOut,\n    activeOpacity = 0.4,\n    style = noOpObj,\n    ...attrs\n  } = props\n  const classRef = useClassName('keg-touchable', className, touchRef || ref)\n\n  const [ touchStyles, setTouchStyles ] = useState(style)\n\n  // update the opacity value on a touch in\n  const onTouchIn = useCallback(\n    event => {\n      checkCall(onPressIn, event)\n      showFeedback && setTouchStyles({ ...touchStyles, opacity: activeOpacity })\n    },\n    [ onPressIn, activeOpacity, showFeedback, touchStyles, setTouchStyles ]\n  )\n\n  // reset the styles back to default on touch out\n  const onTouchOut = useCallback(\n    event => {\n      checkCall(onPressOut, event)\n      setTouchStyles(style)\n    },\n    [ onPressOut, style, setTouchStyles ]\n  )\n\n  return (\n    <Pressable\n      accessible={true}\n      {...attrs}\n      style={touchStyles}\n      onPress={onPress}\n      onPressIn={onTouchIn}\n      onPressOut={onTouchOut}\n      ref={classRef}\n    />\n  )\n})\n\nTouchable.propTypes = {\n  ...Pressable.propTypes,\n  children: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.string,\n    PropTypes.array,\n    PropTypes.func,\n  ]),\n  className: PropTypes.oneOfType([ PropTypes.string, PropTypes.array ]),\n  onClick: PropTypes.func,\n  onPress: PropTypes.func,\n  styles: PropTypes.object,\n  showFeedback: PropTypes.bool,\n  activeOpacity: PropTypes.number,\n  onPressIn: PropTypes.func,\n  onPressOut: PropTypes.func,\n}\n"],"names":["Touchable","React","forwardRef","props","ref","className","showFeedback","touchRef","onPress","onPressIn","onPressOut","activeOpacity","style","noOpObj","attrs","classRef","useClassName","useState","touchStyles","setTouchStyles","onTouchIn","useCallback","event","checkCall","opacity","onTouchOut"],"mappings":";;;;;;;IAsBaA,SAAS,GAAGC,cAAK,CAACC,UAAN,CAAiB,UAACC,KAAD,EAAQC,GAAR,EAAgB;AACxD,MACEC,SADF,GAUIF,KAVJ,CACEE,SADF;AAAA,4BAUIF,KAVJ,CAEEG,YAFF;AAAA,MAEEA,YAFF,oCAEiB,IAFjB;AAAA,MAGEC,QAHF,GAUIJ,KAVJ,CAGEI,QAHF;AAAA,MAIEC,OAJF,GAUIL,KAVJ,CAIEK,OAJF;AAAA,MAKEC,SALF,GAUIN,KAVJ,CAKEM,SALF;AAAA,MAMEC,UANF,GAUIP,KAVJ,CAMEO,UANF;AAAA,6BAUIP,KAVJ,CAOEQ,aAPF;AAAA,MAOEA,aAPF,qCAOkB,GAPlB;AAAA,qBAUIR,KAVJ,CAQES,KARF;AAAA,MAQEA,KARF,6BAQUC,OARV;AAAA,MASKC,KATL,4BAUIX,KAVJ;AAWA,MAAMY,QAAQ,GAAGC,YAAY,CAAC,eAAD,EAAkBX,SAAlB,EAA6BE,QAAQ,IAAIH,GAAzC,CAA7B;AAEA,kBAAwCa,QAAQ,CAACL,KAAD,CAAhD;AAAA;AAAA,MAAQM,WAAR;AAAA,MAAqBC,cAArB,iBAdwD;AAiBxD,MAAMC,SAAS,GAAGC,WAAW,CAC3B,UAAAC,KAAK,EAAI;AACPC,IAAAA,SAAS,CAACd,SAAD,EAAYa,KAAZ,CAAT;AACAhB,IAAAA,YAAY,IAAIa,cAAc,mCAAMD,WAAN;AAAmBM,MAAAA,OAAO,EAAEb;AAA5B,OAA9B;AACD,GAJ0B,EAK3B,CAAEF,SAAF,EAAaE,aAAb,EAA4BL,YAA5B,EAA0CY,WAA1C,EAAuDC,cAAvD,CAL2B,CAA7B,CAjBwD;AA0BxD,MAAMM,UAAU,GAAGJ,WAAW,CAC5B,UAAAC,KAAK,EAAI;AACPC,IAAAA,SAAS,CAACb,UAAD,EAAaY,KAAb,CAAT;AACAH,IAAAA,cAAc,CAACP,KAAD,CAAd;AACD,GAJ2B,EAK5B,CAAEF,UAAF,EAAcE,KAAd,EAAqBO,cAArB,CAL4B,CAA9B;AAQA,SACElB,6BAAC,SAAD;AACE,IAAA,UAAU,EAAE;AADd,KAEMa,KAFN;AAGE,IAAA,KAAK,EAAEI,WAHT;AAIE,IAAA,OAAO,EAAEV,OAJX;AAKE,IAAA,SAAS,EAAEY,SALb;AAME,IAAA,UAAU,EAAEK,UANd;AAOE,IAAA,GAAG,EAAEV;AAPP,KADF;AAWD,CA7CwB;;;;"}