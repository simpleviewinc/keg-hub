{"version":3,"file":"useScroll.js","sources":["../../../src/hooks/useScroll/useScroll.js"],"sourcesContent":["import { useState, useLayoutEffect, useCallback, useRef } from 'react'\nimport { noOp, throttle } from '@keg-hub/jsutils'\nimport { getScrollValues } from 'KegGetScrollValues'\n/**\n * Custom hook to track the browser windows scroll position\n * <br/> The onScroll prop should be a function on consistent identity for the throttle to work\n * <br/> I.E. Wrap with `useCallback` if needed\n * @function\n * @example\n * const [{ scrollX, scrollY }] = useScroll()\n * @param {function} [onScroll] - Function called when the scroll event fires\n * @param {function} [onScrollEnd] - Function called at the end of the scroll event\n * @param {number} [amount=50] - Throttle amount for the scrollHandler callback\n *\n * @returns {Object} The current scrollX and scrollY positions\n */\nexport const useScroll = (onScroll = noOp, onScrollEnd = noOp, amount = 50) => {\n  const [ scroll, setScroll ] = useState({\n    scrollX: 0,\n    scrollY: 0,\n  })\n\n  const timeoutRef = useRef(null)\n\n  const eventHandler = useCallback(\n    throttle((event, isEnd = false) => {\n      const scrollUpdate = getScrollValues()\n\n      isEnd\n        ? onScrollEnd?.(event, scrollUpdate)\n        : onScroll?.(event, scrollUpdate)\n\n      setScroll(scrollUpdate)\n    }, amount),\n    [ amount, onScroll, onScrollEnd, setScroll ]\n  )\n\n  const handlerTimeout = useCallback(\n    event => {\n      if (timeoutRef.current !== null) {\n        clearTimeout(timeoutRef.current)\n      }\n      timeoutRef.current = setTimeout(() => {\n        eventHandler(event, true)\n      }, 3 * amount)\n\n      eventHandler(event)\n    },\n    [ amount, timeoutRef && timeoutRef.current, eventHandler ]\n  )\n\n  useLayoutEffect(() => {\n    window.addEventListener('scroll', handlerTimeout)\n\n    return () => window.removeEventListener('scroll', handlerTimeout)\n  }, [handlerTimeout])\n\n  return scroll\n}\n"],"names":["useScroll","onScroll","noOp","onScrollEnd","amount","useState","scrollX","scrollY","scroll","setScroll","timeoutRef","useRef","eventHandler","useCallback","throttle","event","isEnd","scrollUpdate","getScrollValues","handlerTimeout","current","clearTimeout","setTimeout","useLayoutEffect","window","addEventListener","removeEventListener"],"mappings":";;;;;;;;;IAgBaA,SAAS,GAAG,SAAZA,SAAY,GAAsD;AAAA,MAArDC,QAAqD,uEAA1CC,YAA0C;AAAA,MAApCC,WAAoC,uEAAtBD,YAAsB;AAAA,MAAhBE,MAAgB,uEAAP,EAAO;AAC7E,kBAA8BC,cAAQ,CAAC;AACrCC,IAAAA,OAAO,EAAE,CAD4B;AAErCC,IAAAA,OAAO,EAAE;AAF4B,GAAD,CAAtC;AAAA;AAAA,MAAQC,MAAR;AAAA,MAAgBC,SAAhB;AAKA,MAAMC,UAAU,GAAGC,YAAM,CAAC,IAAD,CAAzB;AAEA,MAAMC,YAAY,GAAGC,iBAAW,CAC9BC,gBAAQ,CAAC,UAACC,KAAD,EAA0B;AAAA,QAAlBC,KAAkB,uEAAV,KAAU;AACjC,QAAMC,YAAY,GAAGC,+BAAe,EAApC;AAEAF,IAAAA,KAAK,GACDb,WADC,aACDA,WADC,uBACDA,WAAW,CAAGY,KAAH,EAAUE,YAAV,CADV,GAEDhB,QAFC,aAEDA,QAFC,uBAEDA,QAAQ,CAAGc,KAAH,EAAUE,YAAV,CAFZ;AAIAR,IAAAA,SAAS,CAACQ,YAAD,CAAT;AACD,GARO,EAQLb,MARK,CADsB,EAU9B,CAAEA,MAAF,EAAUH,QAAV,EAAoBE,WAApB,EAAiCM,SAAjC,CAV8B,CAAhC;AAaA,MAAMU,cAAc,GAAGN,iBAAW,CAChC,UAAAE,KAAK,EAAI;AACP,QAAIL,UAAU,CAACU,OAAX,KAAuB,IAA3B,EAAiC;AAC/BC,MAAAA,YAAY,CAACX,UAAU,CAACU,OAAZ,CAAZ;AACD;AACDV,IAAAA,UAAU,CAACU,OAAX,GAAqBE,UAAU,CAAC,YAAM;AACpCV,MAAAA,YAAY,CAACG,KAAD,EAAQ,IAAR,CAAZ;AACD,KAF8B,EAE5B,IAAIX,MAFwB,CAA/B;AAIAQ,IAAAA,YAAY,CAACG,KAAD,CAAZ;AACD,GAV+B,EAWhC,CAAEX,MAAF,EAAUM,UAAU,IAAIA,UAAU,CAACU,OAAnC,EAA4CR,YAA5C,CAXgC,CAAlC;AAcAW,EAAAA,qBAAe,CAAC,YAAM;AACpBC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCN,cAAlC;AAEA,WAAO;AAAA,aAAMK,MAAM,CAACE,mBAAP,CAA2B,QAA3B,EAAqCP,cAArC,CAAN;AAAA,KAAP;AACD,GAJc,EAIZ,CAACA,cAAD,CAJY,CAAf;AAMA,SAAOX,MAAP;AACD;;;;"}