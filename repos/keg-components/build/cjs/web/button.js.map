{"version":3,"file":"button.js","sources":["../../../src/components/button/button.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { get, isNum } from '@keg-hub/jsutils'\nimport { Touchable } from '../touchable'\nimport { Text } from '../typography/text'\nimport { useThemePath } from '../../hooks'\nimport { useThemeHover, useThemeActive } from '@keg-hub/re-theme'\nimport { getActiveOpacity, getPressHandler, renderFromType } from '../../utils'\nimport { useThemeTypeAsClass } from 'KegTypeAsClass'\n\n/**\n * Finds the child type and formats it in the proper type to be rendered\n * @param {Object|Array|string} Children - React components to render\n * @param {Object} props\n * @param {Object} props.styles - Custom styles passed into the component as a prop\n * @param {boolean} props.selectable - whether the text content is selectable or not\n * \n * @returns {React Component|Object|Array}\n */\nconst getChildren = (Children, {styles, selectable}) => {\n  return renderFromType(Children, { style: styles?.content, selectable }, Text)\n}\n\nconst checkDisabled = (mainStyles, btnStyles, disabled) => {\n  return disabled\n    ? { ...mainStyles, ...get(btnStyles, 'disabled.main') }\n    : mainStyles\n}\n\n/**\n * Button\n * @summary Custom button component. All props are optional\n *\n * @param {Object} props - see buttonPropTypes\n * @property {String} props.text - button text\n * @property {String} props.type - flat, text, outlined, contained; default 'flat'\n * @property {Object} props.style - custom style\n * @property {Function} props.onPress - function to do when button is pressed\n * @property {Boolean} [props.showFeedback=false] - Should opacity feebBack be shown when the button is pressed\n * @property {Boolean} props.disabled\n * @property {Object} props.children\n * @property {Number=} props.activeOpacity - add opacity value to active state\n * @property {Boolean=} props.disabled - disable button interaction. default false\n * @property {Boolean=} props.selectable - whether the button text is selectable or not. default false\n * @property {Object} props.ref - reference to native element\n *\n */\nexport const Button = React.forwardRef((props, ref) => {\n  const {\n    className,\n    children,\n    content,\n    onClick,\n    onPress,\n    styles,\n    showFeedback=false,\n    type = 'default',\n    themePath,\n    activeOpacity,\n    disabled=false,\n    selectable=false,\n    ...elProps\n  } = props\n\n  const btnStyles = useThemePath(\n    themePath || `button.contained.${type}`,\n    styles\n  )\n\n  const [ hoverRef, hoverStyles ] = useThemeHover(\n    get(btnStyles, 'default', {}),\n    get(btnStyles, 'hover'),\n    { ref }\n  )\n\n  const [ themeRef, themeStyles ] = useThemeActive(\n    hoverStyles,\n    get(btnStyles, 'active'),\n    { ref: hoverRef }\n  )\n\n  return (\n    <Touchable\n      accessibilityRole='button'\n      className={useThemeTypeAsClass(\n        themePath || type,\n        'keg-button',\n        className\n      )}\n      {...elProps}\n      disabled={disabled}\n      touchRef={themeRef}\n      showFeedback={isNum(activeOpacity) || showFeedback}\n      style={checkDisabled(themeStyles.main, btnStyles, disabled)}\n      children={getChildren(children || content, {styles: themeStyles, selectable})}\n      {...getPressHandler(false, onClick, onPress)}\n      {...getActiveOpacity(false, props, btnStyles)}\n    />\n  )\n})\n\nButton.propTypes = {\n  ...Touchable.propTypes,\n  children: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.string,\n    PropTypes.array,\n    PropTypes.func,\n  ]),\n  content: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.string,\n    PropTypes.array,\n    PropTypes.func,\n  ]),\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func,\n  onPress: PropTypes.func,\n  ref: PropTypes.object,\n  styles: PropTypes.object,\n  themePath: PropTypes.string,\n  selectable: PropTypes.bool,\n  activeOpacity: PropTypes.number,\n  showFeedback: PropTypes.bool\n}\n"],"names":["getChildren","Children","styles","selectable","renderFromType","style","content","Text","checkDisabled","mainStyles","btnStyles","disabled","get","Button","React","forwardRef","props","ref","className","children","onClick","onPress","showFeedback","type","themePath","activeOpacity","elProps","useThemePath","useThemeHover","hoverRef","hoverStyles","useThemeActive","themeRef","themeStyles","Touchable","useThemeTypeAsClass","isNum","main","getPressHandler","getActiveOpacity"],"mappings":"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"}