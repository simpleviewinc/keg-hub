{"version":3,"file":"wait-610df936.js","sources":["../../src/promise/promisify.js","../../src/promise/promisifyAll.js","../../src/promise/wait.js"],"sourcesContent":["/** @module promise */\n\nimport { isObj } from '../object/isObj'\nimport { isFunc } from '../method/isFunc'\n\n/**\n * Converts a standard callback method into Promise\n * @param {function} method - method to turn into a promise\n * @function\n *\n * @return method as a promise\n */\nexport const promisify = method => {\n  if(!isFunc(method)) throw `Argument must be a function`\n\n  return (...args) => {\n    return new Promise((res, rej) => {\n      // If the last arg is not a function, just return the resolved method\n      if(!isFunc(args[args.length -1]))\n        return res(method(...args))\n\n      // Remove the callback method\n      args.pop()\n      // Replace it with the promise resolve / reject\n      args.push((...cbData) => {\n        // If the cbData first arg is not falsy, then reject the promise\n        // Otherwise resolve it\n        return cbData && cbData[0]\n          ? rej(...cbData)\n          : res(...cbData)\n      })\n\n      // Call the method, and return it\n      return method(...args)\n    })\n  }\n}\n","/** @module promise */\n\nimport { isObj } from '../object/isObj'\nimport { isFunc } from '../method/isFunc'\nimport { promisify } from './promisify'\n\n/**\n * Creates an array of Object default properties not to convert into promises\n * @ignore\n */\nconst defObjProps = Array\n  .from([\n    'caller',\n    'callee',\n    'arguments',\n    'apply',\n    'bind',\n    'call',\n    'toString',\n    '__proto__',\n    '__defineGetter__',\n    '__defineSetter__',\n    'hasOwnProperty',\n    '__lookupGetter__',\n    '__lookupSetter__',\n    'isPrototypeOf',\n    'propertyIsEnumerable',\n    'valueOf',\n    'toLocaleString'\n  ])\n  .concat(Object.getOwnPropertyNames(Object.prototype))\n  .reduce((map, functionName) => {\n    map[functionName] = true\n    return map\n  }, {})\n\n/**\n * Loops an object and looks for any methods that belong to the object, then add an Async version\n * @memberof promise\n * @param {Object} object\n * @return {Object} - object with Async methods added\n */\nconst addAsync = object => {\n  if (!object.__IS_PROMISIFIED__) {\n    for (const prop of Object.getOwnPropertyNames(object)) {\n      const isAsync = prop.indexOf('Async') !== -1 || object[`${prop}Async`]\n      if (isAsync || defObjProps[prop]) continue\n\n      if(isFunc(object[prop]))\n        object[`${prop}Async`] = promisify(object[prop])\n      else {\n        const getValue = Object.getOwnPropertyDescriptor(object, prop).get\n        if(isFunc(getValue)) object[`${prop}Async`] = promisify(getValue)\n      }\n    }\n    object.__IS_PROMISIFIED__ = true\n  }\n\n  return object\n}\n\n/**\n * Converts Objects method properties into promiseAsync. allow using promisifyAll\n * @function\n * @param {Object} object\n * @return {Object} - promisified object\n */\nexport const promisifyAll = object => {\n  if(!isObj(object)) return object\n\n  addAsync(object)\n  const proto = Object.getPrototypeOf(object)\n\n  proto &&\n    Object.getPrototypeOf(proto) !== null &&\n    addAsync(proto)\n\n  return object\n}\n","/** @module promise */\n\n'use strict'\n\nimport { isObj } from '../object/isObj'\nimport { isFunc } from '../method/isFunc'\n\n/**\n * Stops execution for a given amount of time\n * @function\n * @param {number} time - Amount of time to wait\n * @return { void }\n */\nexport const wait = time => (new Promise((res, rej) => setTimeout(() => res(true), time)))"],"names":["promisify","method","isFunc","args","Promise","res","rej","length","pop","push","cbData","defObjProps","Array","from","concat","Object","getOwnPropertyNames","prototype","reduce","map","functionName","addAsync","object","__IS_PROMISIFIED__","prop","isAsync","indexOf","getValue","getOwnPropertyDescriptor","get","promisifyAll","isObj","proto","getPrototypeOf","wait","time","setTimeout"],"mappings":"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"}