{"version":3,"file":"uniqArr-89054e7a.js","sources":["../../src/array/areFrequencyEqual.js","../../src/array/areSetEqual.js","../../src/array/cloneArr.js","../../src/array/eitherArr.js","../../src/array/flatMap.js","../../src/array/findExtrema.js","../../src/array/findMax.js","../../src/array/findMin.js","../../src/array/omitRange.js","../../src/array/randomArr.js","../../src/array/randomizeArr.js","../../src/array/uniqArr.js"],"sourcesContent":["/** @module array */\n\nimport { validate } from '../validation'\nimport { isArr } from './isArr'\n\n/**\n * Builds a map of elements mapped to their frequency counts\n * @param {Array<*>} arr \n * @return {Map<*, number>}\n */\nexport const buildElementCountMap = arr => {\n  const counts = new Map()\n  for (let i = 0; i < arr.length; i++) {\n    const element = arr[i]\n    const count = counts.get(element) ?? 0\n    counts.set(element, count + 1)\n  }\n  return counts\n}\n\n/**\n * Returns true if the maps \n * @param {Map<*, number>} mapA \n * @param {Map<*, number>} mapB \n */\nexport const areCountMapsEqual = (mapA, mapB) => {\n  if (mapA.size !== mapB.size) return false\n\n  for (let [ key, count ] of mapA) {\n    const otherCount = mapB.get(key)\n    if (otherCount !== count) return false\n  }\n\n  return true\n}\n\n/**\n * Checks if arrays are frequency equal. Does this \n * by making only one pass over each array and using an\n * auxilliary map.\n * @function\n * @param {Array<*>} arr \n * @param {Array<*>} otherArr \n * @returns {boolean} true if otherArr contains exactly the same elements as arr, \n * where order does not matter, but frequency does\n */\nexport const areFrequencyEqual = (arr, otherArr) => {\n  const [ valid ] = validate({ arr, otherArr }, { $default: isArr })\n  if (!valid) return null\n\n  if (arr === otherArr) return true\n  if (arr.length !== otherArr.length) return false\n\n  const arrCounts = buildElementCountMap(arr)\n  const otherCounts = buildElementCountMap(otherArr)\n\n  return areCountMapsEqual(arrCounts, otherCounts)\n}\n","/** @module array */\n\nimport { validate } from '../validation'\nimport { isArr } from './isArr'\n\n/**\n * Checks if arrays are set-equal: they contain the same elements,\n * but element frequencies don't matter.\n * Does this with one pass over each array and an auxilliary set.\n * @function\n * @param {Array<*>} arr \n * @param {Array<*>} otherArr \n */\nexport const areSetEqual = (arr, otherArr) => {\n  const [ valid ] = validate({ arr, otherArr }, { $default: isArr })\n  if (!valid) return null\n\n  if (arr === otherArr) return true\n\n  const [ longest, shortest ] = arr.length > otherArr.length\n    ? [ arr, otherArr ]\n    : [ otherArr, arr ]\n\n  const arrSet = new Set(shortest)\n\n  for (let i = 0; i < longest.length; i++) {\n    const element = longest[i]\n    if (!arrSet.has(element)) return false\n  }\n\n  return true\n}","/** @module array */\n\nimport { isArr } from './isArr'\nimport { isObj } from '../object/isObj'\n\n/**\n * Creates a copy of the passed in array.\n * <br> Returns empty array, if param is not an array.\n * @function\n * @example\n * cloneArr([1,2,3])\n * // Returns copy of the passed on array\n * @param {array} arr - array to be copied\n * @return {array} - copy of passed in array\n */\nexport const cloneArr = arr => (\n  Array.from([\n    // If arr is not an array or object, just use empty array, so we don't throw!\n    ...(isArr(arr) && arr || isObj(arr) && Object.entries(arr) || [])\n  ])\n)\n","/** @module array */\n\nimport { isArr } from './isArr'\n\n/**\n * Returns a if it is an Array, else returns b\n * @function\n * @param {*} a\n * @param {*} b\n * @returns {*} either a, if it's an array, or b\n * \n * @example\n * const foo = eitherArr('hi', 1) // returns 1\n * const bar = eitherArr([ 2 ], 1) // returns [ 2 ]\n */\nexport const eitherArr = (a, b) => isArr(a) ? a : b","/** @module array */\n\nimport { isArr } from './isArr'\nimport { isFunc } from '../method/isFunc'\nimport { validate } from '../validation'\n\n/**\n * Maps each element using mapping function `mapFn`, but returns the result as a flattened array.\n * It is equivalent to map() followed by flattening to depth 1, but flatMap is a useful shortcut,\n * and merging both steps into one method (with one pass over the array) is slightly more efficient. \n * @function\n * @example\n * [1, 2].map(x => [x * 2]) // returns [[2], [4]]\n * flatMap([1, 2], x => [x * 2]) // returns [2, 4]\n * @param {Array} arr - array to map across\n * @param {Function} mapFn - function for mapping\n */\nexport const flatMap = (arr, mapFn) => {\n  const [ inputIsValid ] = validate(\n    { arr, mapFn },\n    { arr: isArr, mapFn: isFunc }\n  )\n  if (!inputIsValid) return arr;\n\n  // iterate across the array, calling mapFn on each element, then flattening into final array\n  return arr.reduce(\n    (finalArr, current) => {\n      const result = mapFn(current)\n      isArr(result)\n        ? result.map(el => finalArr.push(el))\n        : finalArr.push(result)\n      return finalArr\n    },\n    []\n  )\n}\n\n","/** @module array */\n\nimport { isArr } from './isArr'\nimport { isFunc } from '../method'\nimport { validate } from '../validation'\n\n/**\n * Finds the extremum (e.g. max, min) element within array `arr` as defined by the `comparator` function\n * @function\n * @param {Array<*>} arr \n * @param {Function} comparator - comparison function like the compareFunction in sort: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\n * @returns {*} the element in `arr` that is the extremum as defined by `comparator`. If arr is empty, this function returns null.\n * @example\n * const max = findExtrema([ { a: 1 }, { a: 2} ], (x, y) => x.a - y.a)\n * // max === { a: 2 } \n */\nexport const findExtrema = (arr, comparator) => {\n  const [ valid ] = validate({ arr, comparator }, { arr: isArr, $default: isFunc })\n  if (!valid) return null\n\n  return arr.length\n    ? arr.reduce(\n        (extremaSoFar, next) => (comparator(extremaSoFar, next) > 0 ? extremaSoFar : next)\n      )\n    : null\n}\n","/** @module array */\nimport { identity, compareTo } from '../method'\nimport { findExtrema } from './findExtrema'\n\n/**\n * Returns the maximum element in arr\n * @function\n * @param {Array<Object>} arr\n * @param {Function?} propSelector - optional property selector for choosing the property to compare with\n * @example\n * const items = [ { num: 1 }, { num: 3 } ]\n * findMax(items, item => item.num) // returns { num: 3 }\n */\nexport const findMax = (arr = [], propSelector=identity) => findExtrema(\n  arr, \n  (x, y) => compareTo(propSelector(x), propSelector(y))\n)\n","/** @module array */\nimport { identity, compareTo } from '../method'\nimport { findExtrema } from './findExtrema'\n\n/**\n * Returns the minimum element in arr\n * @function\n * @param {Array<Object>} arr\n * @param {Function?} propSelector - optional property selector for choosing the property to compare with\n * @example\n * const items = [ { num: 1 }, { num: 3 } ]\n * findMax(items, item => item.num) // returns { num: 1 }\n */\nexport const findMin = (arr = [], propSelector=identity) => findExtrema(\n  arr, \n  (x, y) => compareTo(propSelector(y), propSelector(x))\n)\n","/** @module array */\n\nimport { isNonNegative } from '../number/isNonNegative'\nimport { validate } from '../validation'\nimport { isArr } from './isArr'\n\n/**\n * Returns a new array with the same elements as arr, excluding `count` elements beginning at index `startIndex`\n * @function\n * @param {Array} arr \n * @param {Number} startIndex \n * @param {Number} count \n */\nexport const omitRange = (arr, startIndex, count) => {\n  const [ inputIsValid ] = validate(\n    { arr, startIndex, count },\n    { arr: isArr, $default: isNonNegative }\n  )\n\n  if (!inputIsValid) return arr\n\n  const nextArr = [ ...arr ]\n\n  nextArr.splice(startIndex, count)\n\n  return nextArr\n}\n","/** @module array */\n\nimport { isArr } from './isArr'\n\n/**\n * Randomly selects values from a passed in array.\n * @function\n * @example\n * randomArr([1,2,3], 1)\n * // Returns an array with one of the values in the passed in array\n * @param {array} arr - array to select values from\n * @param {number} amount - number of values to select from the array\n * @return {array} - randomly sorted array\n */\nexport const randomArr = (arr, amount) => {\n  if(!isArr(arr)) return arr\n\n  const useAmount = amount || 1\n  const randoms = []\n  for (let i = 0; i < useAmount; i++) {\n    randoms.push(arr[Math.floor(Math.random() * arr.length)])\n  }\n\n  return !amount ? randoms[0] : randoms\n}\n","/** @module array */\n\nimport { isArr } from './isArr'\n\n/**\n * Randomly sorts an arrays items.\n * @function\n * @example\n * randomizeArr([1,2,3])\n * // Returns an array randomly sorted\n * @param {array} arr - array to randomly sorted\n * @return {array} - randomly sorted array\n */\nexport const randomizeArr = arr => (\n  !isArr(arr) && arr || arr.sort(() => (0.5 - Math.random()))\n)","/** @module array */\n\nimport { isArr } from './isArr'\n\n/**\n * Removes duplicates from an array, checking by reference-equality\n * @function\n * @example\n * uniqArr([1,1,2,3,3])\n * // Returns array with only unique values [ 1, 2, 3 ]\n * @param {array} arr - array to remove duplicates from\n * @return {array} copy of passed in array, with duplicates removed\n */\nexport const uniqArrByReference = (arr) => {\n  return !isArr(arr)\n    ? arr\n    : arr.filter((e, i, arr) => arr.indexOf(e) == i\n  )\n}\n\n/**\n * \n * @param {*} arr \n * @param {*} selector \n */\n/**\n * Removes duplicates from an array.\n * @function\n * @example\n * uniqArr([1,1,2,3,3])\n * // Returns array with only unique values [ 1, 2, 3 ]\n * @example\n * uniqArr([ {a: 1} , { a: 1 }], element => element.a)\n * // Returns array [ { a: 1 } ]\n * @param {array} arr - array to remove duplicates from\n * @param {Function?} selector - optional function to specify the property uniqArr should use to check if another element exists\n * @return {array} copy of passed in array, with duplicates removed\n */\nexport const uniqArr = (arr, selector) => {\n  if (!selector) return uniqArrByReference(arr)\n\n  // loop over each element in one pass, \n  // only including in the unique array elements\n  // we haven't encountered before \n  // by checking with `selector` and the set\n  const { unique } = arr.reduce(\n    (data, element) => {\n      const id = selector(element)\n      !data.set.has(id) && data.unique.push(element)\n      data.set.add(id)\n      return data\n    },\n    { \n      unique: [], \n      set: new Set()\n    }\n  )\n\n  return unique\n}"],"names":["buildElementCountMap","arr","counts","Map","i","length","element","count","get","set","areCountMapsEqual","mapA","mapB","size","key","otherCount","areFrequencyEqual","otherArr","valid","validate","$default","isArr","arrCounts","otherCounts","areSetEqual","longest","shortest","arrSet","Set","has","cloneArr","Array","from","isObj","Object","entries","eitherArr","a","b","flatMap","mapFn","inputIsValid","isFunc","reduce","finalArr","current","result","map","el","push","findExtrema","comparator","extremaSoFar","next","findMax","propSelector","identity","x","y","compareTo","findMin","omitRange","startIndex","isNonNegative","nextArr","splice","randomArr","amount","useAmount","randoms","Math","floor","random","randomizeArr","sort","uniqArrByReference","filter","e","indexOf","uniqArr","selector","unique","data","id","add"],"mappings":"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"}