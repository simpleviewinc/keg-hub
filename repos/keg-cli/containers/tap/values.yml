
start: /bin/bash /keg/keg-cli/containers/tap/run.sh
env:
  # --- LOCAL ENV CONTEXT --- #
  COMPONENTS_PATH: "{{ cli.paths.components }}"
  RETHEME_PATH: "{{ cli.taps.links.retheme }}"
  RESOLVER_PATH: "{{ cli.paths.resolver }}"
  CLI_PATH: "{{ cli.paths.cli }}"
  
  # --- TAP ENV CONTEXT --- #

  # Docker / Docker Compose paths
  KEG_DOCKER_FILE: "{{ cli.paths.containers }}/tap/Dockerfile"
  KEG_VALUES_FILE: "{{ cli.paths.containers }}/tap/values.yml"
  KEG_MUTAGEN_PATH: "{{ cli.paths.containers }}/tap/mutagen.yml"

  # The default docker-compose file path
  KEG_COMPOSE_DEFAULT: "{{ cli.paths.containers }}/tap/docker-compose.yml"
  # Can also define other an override compose files
  # Other compose files can loaded by setting an ENVS as follows:
    # KEG_COMPOSE_REPO="/path/to/override.yml"
    # KEG_COMPOSE_TAP_<ENV>: "/path/to/override.yml"
    # KEG_COMPOSE_<ENV>: "/path/to/override.yml"

  # The KEG_CONTEXT_PATH env should be the location of the tap being run
  # So it should NOT be set inside the .env file
  KEG_CONTEXT_PATH: INITIAL

  # --- DOCKER ENV CONTEXT --- #

  # Default location of the tap in the docker container
  DOC_APP_PATH: /keg/tap
  DOC_APP_PORT: 19006
  DOC_CORE_PATH: /keg/tap/node_modules/keg-core
  DOC_COMPONENTS_PATH: /keg/tap/node_modules/keg-core/node_modules/@svkeg/keg-components
  DOC_RETHEME_PATH: /keg/tap/node_modules/keg-core/node_modules/@svkeg/re-theme
  DOC_RESOLVER_PATH: /keg/tap/node_modules/keg-core/node_modules/@svkeg/tap-resolver

  # --- KEG-PROXY ENVs --- #
  # See https://github.com/whitestrake/caddy-gen for more information
  CADDY_HOST: tap.kegdev.xyz
  CADDY_PROXY_PARAMS: transparent,websocket

  # Uncomment to lock down a folder path on the server
  # Format [path]:[user]:[pass], where [path] is the directory to protect
  # Declare multiple by separating them with commas.
  # CADDY_BASIC_AUTH: /:foo:bar

  # --- GENERAL CONTEXT ENVs --- #

  # Image Build information
  IMAGE: tap
  VERSION: "0.0.1"
  CONTAINER_NAME: tap
  CHOKIDAR_USEPOLLING: 1

  # Git tap url in github
  GIT_APP_URL: INITIAL
