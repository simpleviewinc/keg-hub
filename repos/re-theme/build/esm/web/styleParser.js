import{isArr as e,isFunc as r,camelCase as t,exists as n,checkCall as s,isObj as a}from"@keg-hub/jsutils";import{h as o,_ as c,e as i,c as l}from"./_rollupPluginBabelHelpers-cd4ddb53.js";var warnOfStylesheetError=function(e,r){!function(e){var r;return e instanceof DOMException&&(null===(r=e.name)||void 0===r?void 0:r.includes("SecurityError"))}(r)?console.warn("Cannot parse stylesheet from source:",null==e?void 0:e.href,"\n Reason: ".concat(r.name," - ").concat(r.message)):console.warn("Cannot parse cross-origin restricted stylesheet from source:",null==e?void 0:e.href,"\nThis stylesheet will be safely ignored, but if you need access to it, then you should either ensure the domains match or adjust the stylesheet server's security policy.")},getStyleContent=function(r){var t=/\{(.+?)\}/,n=new RegExp(t,"gi"),s=[],a=r.match(n);for(var o in a){var c=a[o];s[o]=c.match(new RegExp(t))}return e(s[0])?s[0][1]:""},cssToJs=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=getStyleContent(e).trim().split(";");return s.reduce((function(e,r){if(-1===r.indexOf(":"))return e;var s=r.split(":"),a=c(s,2),o=a[0],u=a[1];return o=t(o.trim()),u=u.trim(),n(o)&&n(u)&&""!==o&&""!==u?i(i({},e),{},l({},o,u)):e}),r)},loopSheetCssRules=function(e,r,t,n){var a=function(e){try{return(null==e?void 0:e.cssRules)||[]}catch(r){warnOfStylesheetError(e,r)}return[]}(r);return Array.from(a).reduce((function(e,r){if(!r.selectorText||!r.cssText)return e;var a=r.selectorText.split(" ").shift();return t.includes(a)?s(n,r,a,e,cssToJs):e}),e)},styleSheetParser=function(t){var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o()&&e(t.classNames)?r(t.callback)?t:(console.error("[ Error ] styleSheetParser requires a function callback.\nIt received:",t.callback),{valid:!1}):(console.error("[ Error ] styleSheetParser requires Dom Access and an array of class names!"),{valid:!1})}(t),s=n.classNames,c=n.callback,i=n.toDom,l=void 0===i||i;if(!1===n.valid)return{};var u,d,f=e(s)&&Array.from(document.styleSheets).reduce((function(e,r){return loopSheetCssRules(e,r,s,c)}),{asStr:""});return l&&a(f)&&f.asStr&&(u=f.asStr,(d=document.createElement("style")).styleSheet?d.styleSheet.cssText=u:d.appendChild(document.createTextNode(u)),document.getElementsByTagName("head")[0].appendChild(d)),f};export{styleSheetParser};
//# sourceMappingURL=styleParser.js.map
