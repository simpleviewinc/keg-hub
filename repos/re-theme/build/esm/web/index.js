import{get as e,noOpObj as t,isFunc as a,checkCall as i,isObj as f,isEmptyColl as v,deepMerge as h,noPropObj as d}from"@keg-hub/jsutils";import{D as E,_ as p,R as w,a as S,b as P,g as L,c as T,d as N,h as D,e as B,u as M,f as b,i as y}from"./useTheme-d0a4d31a.js";export{R as ReThemeContext,m as addThemeEvent,n as fireThemeEvent,c as getDefaultTheme,k as getMergeSizes,g as getSize,j as getSizeMap,r as removeThemeEvent,o as setDefaultTheme,s as setRNPlatform,l as setSizes,u as useTheme}from"./useTheme-d0a4d31a.js";import z,{useState as O,useEffect as x,useMemo as F,useRef as I,useCallback as C}from"react";var U,A,setRNDimensions=function(e){},useDimensions=function(){var e=O(E.get("window")),n=p(e,2),t=n[0],o=n[1],onChange=function(e){var n=e.window,t=n.width,r=n.height,u=n.scale,a=n.fontScale;o({width:t,height:r,scale:u,fontScale:a})};return x((function(){return E.addEventListener("change",onChange),function(){return onChange.shouldUnmount=!0,E.removeEventListener("change",onChange)}}),[]),t},withTheme=function(e){return function(n){return z.createElement(w.Consumer,null,(function(t){return z.createElement(e,S({theme:t},n))}))}},ReThemeProvider=function(n){var t=n.children,o=n.theme,r=n.merge,u=n.platforms,a=Boolean(r||!r&&!1!==r)||!1,i=O(E.get("window")),c=p(i,2),f=c[0],s=c[1],onChange=function(n){var t=n.window,o=t.width,r=t.height,u=t.scale,a=t.fontScale,i=L(o);if(i){var c=i[0],f=N();c!==e(f,["RTMeta","key"])&&s({width:o,height:r,scale:u,fontScale:a})}};x((function(){return E.addEventListener("change",onChange),function(){E.removeEventListener("change",onChange)}}),[]);var v=F((function(){return P(o,f.width,f.height,a&&T(),u)}),[o,f.width,f.height,a,u]);return z.createElement(w.Provider,{value:v},t)},_=!1;D()&&(U=0,A=function(){U=Date.now(),_&&(_=!1)},document.addEventListener("touchstart",A,!0),document.addEventListener("touchmove",A,!0),document.addEventListener("mousemove",(function(){!_&&Date.now()-U>1e3&&(_=!0)}),!0));var useEventCallBacks=function(e){var n,t=e.pointerState,o=e.onEvent,r=e.offEvent,u=e.onName,a=e.offName,c=O(!1),f=p(c,2),s=f[0],v=f[1],h=C((function(e){i(r,e),v(!1)}),[s,v,r]),d=C((function(e){("hover"!==t||_)&&(i(o,e),v(!0),"active"===t&&document.addEventListener(a,h,{once:!0}))}),[t,s,v,o]);return B(n={},t,s),B(n,u,d),B(n,a,h),n},useElementEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1?arguments[1]:void 0,o="hover"===n?useEventCallBacks({pointerState:n,onName:"onPointerIn",offName:"onPointerOut",onEvent:e.onPointerIn,offEvent:e.onPointerOut}):t,r=o.hover,u=void 0!==r&&r,a=o.onPointerIn,i=o.onPointerOut,c="focus"===n?useEventCallBacks({pointerState:n,onName:"onFocus",offName:"onBlur",onEvent:e.onFocus,offEvent:e.onBlur}):t,f=c.focus,s=void 0!==f&&f,v=c.onFocus,h=c.onBlur,d="active"===n?useEventCallBacks({pointerState:n,onName:"onPointerDown",offName:"mouseup",onEvent:e.onPointerDown,offEvent:e.onMouseUp}):t,m=d.active,l=void 0!==m&&m,g=d.onPointerDown;return F((function(){return{active:l,focus:s,hover:u,events:"hover"===n?{pointerover:a,pointerout:i}:"focus"===n?{focus:v,blur:h}:{pointerdown:g}}}),[l,s,u,h,v,g,a,i,e.ref,n])},loopElementEvents=function(e,n,t){Object.entries(n).map((function(n){var o=p(n,2),r=o[0],u=o[1];return e[t](r,u)}))},createCBRef=function(e,n){var t=I(null),o=C((function(n){t.current=n,a(e)?e(n):e&&(e.current=n)}),[t.current,e,e.current]);return x((function(){return t.current&&loopElementEvents(t.current,n,"addEventListener"),function(){t.current&&loopElementEvents(t.current,n,"removeEventListener")}}),[t.current,n]),o},usePointerState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1?arguments[1]:void 0,o=useElementEvents(e,n),r=o.events,u=o.hover,a=o.active,i=o.focus;return{hover:u,focus:i,active:a,events:r,ref:createCBRef(e.ref,r)}},useStylesCallback=function(e,n,t){var o=C(e,n||[]),r=!(!t||!f(t)||v(t))&&t,u=M();return F((function(){return i.apply(void 0,[o,u,r].concat(b(n)))||{}}),[u,o,r])},useCompareState=function(e,n,t,o){return F((function(){return o?t?n:h(e,n):e}),[e,n,t,o])},useThemeState=function(e){return function(n,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=I(null),u=usePointerState(y(y({},o),{},{ref:o.ref||r}),e),a=u.ref,i=u[e],c=useCompareState(n,t,Boolean(o.noMerge),i);return[a,c]}},q=useThemeState("hover"),G=useThemeState("active"),H=useThemeState("focus"),useStyle=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var o=M();return F((function(){return o.get.apply(o,n)||d}),[o].concat(n))};export{ReThemeProvider,setRNDimensions,useDimensions,usePointerState,useStyle,useStylesCallback,G as useThemeActive,H as useThemeFocus,q as useThemeHover,withTheme};
//# sourceMappingURL=index.js.map
