"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./useTheme-c0acf208.js"),t=require("react"),n=require("@keg-hub/jsutils");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=_interopDefaultLegacy(t);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var r,i=(function(e){e.exports=function(){function shim(e,t,n,o,r,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function getShim(){return shim}shim.isRequired=shim;var e={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return e.PropTypes=e,e}()}(r={exports:{}},r.exports),r.exports),ReThemeProvider=function(r){var i=r.children,u=r.theme,s=r.merge,c=r.platforms,a=Boolean(s||!s&&!1!==s)||!1,f=t.useState(e.Dimensions.get("window")),m=e._slicedToArray(f,2),h=m[0],p=m[1],onChange=function(t){var o=t.window,r=o.width,i=o.height,u=o.scale,s=o.fontScale,c=e.getSize(r);if(c){var a=c[0],f=e.getCurrentTheme();a!==n.get(f,["RTMeta","key"])&&p({width:r,height:i,scale:u,fontScale:s})}};t.useEffect((function(){return e.Dimensions.addEventListener("change",onChange),function(){e.Dimensions.removeEventListener("change",onChange)}}),[]);var l=t.useMemo((function(){return e.buildTheme(u,h.width,h.height,a&&e.getDefaultTheme(),c)}),[u,h.width,h.height,a,c]);return o.default.createElement(e.ReThemeContext.Provider,{value:l},i)};ReThemeProvider.propTypes={theme:i.object.isRequired,merge:i.bool,platforms:i.array,children:i.node};var u,s,c=!1;n.hasDomAccess()&&(u=0,s=function(){u=Date.now(),c&&(c=!1)},document.addEventListener("touchstart",s,!0),document.addEventListener("touchmove",s,!0),document.addEventListener("mousemove",(function(){!c&&Date.now()-u>1e3&&(c=!0)}),!0));var useEventCallBacks=function(o){var r,i=o.pointerState,u=o.onEvent,s=o.offEvent,a=o.onName,f=o.offName,m=t.useState(!1),h=e._slicedToArray(m,2),p=h[0],l=h[1],v=t.useCallback((function(e){n.checkCall(s,e),l(!1)}),[p,l,s]),d=t.useCallback((function(e){("hover"!==i||c)&&(n.checkCall(u,e),l(!0),"active"===i&&document.addEventListener(f,v,{once:!0}))}),[i,p,l,u]);return r={},e._defineProperty(r,i,p),e._defineProperty(r,a,d),e._defineProperty(r,f,v),r},useElementEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.noOpObj,o=arguments.length>1?arguments[1]:void 0,r="hover"===o?useEventCallBacks({pointerState:o,onName:"onPointerIn",offName:"onPointerOut",onEvent:e.onPointerIn,offEvent:e.onPointerOut}):n.noOpObj,i=r.hover,u=void 0!==i&&i,s=r.onPointerIn,c=r.onPointerOut,a="focus"===o?useEventCallBacks({pointerState:o,onName:"onFocus",offName:"onBlur",onEvent:e.onFocus,offEvent:e.onBlur}):n.noOpObj,f=a.focus,m=void 0!==f&&f,h=a.onFocus,p=a.onBlur,l="active"===o?useEventCallBacks({pointerState:o,onName:"onPointerDown",offName:"mouseup",onEvent:e.onPointerDown,offEvent:e.onMouseUp}):n.noOpObj,v=l.active,d=void 0!==v&&v,g=l.onPointerDown;return t.useMemo((function(){return{active:d,focus:m,hover:u,events:"hover"===o?{pointerover:s,pointerout:c}:"focus"===o?{focus:h,blur:p}:{pointerdown:g}}}),[d,m,u,p,h,g,s,c,e.ref,o])},loopElementEvents=function(t,n,o){Object.entries(n).map((function(n){var r=e._slicedToArray(n,2),i=r[0],u=r[1];return t[o](i,u)}))},createCBRef=function(e,o){var r=t.useRef(null),i=t.useCallback((function(t){r.current=t,n.isFunc(e)?e(t):e&&(e.current=t)}),[r.current,e,e.current]);return t.useEffect((function(){return r.current&&loopElementEvents(r.current,o,"addEventListener"),function(){r.current&&loopElementEvents(r.current,o,"removeEventListener")}}),[r.current,o]),i},usePointerState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.noOpObj,t=arguments.length>1?arguments[1]:void 0,o=useElementEvents(e,t),r=o.events,i=o.hover,u=o.active,s=o.focus;return{hover:i,focus:s,active:u,events:r,ref:createCBRef(e.ref,r)}},useCompareState=function(e,o,r,i){return t.useMemo((function(){return i?r?o:n.deepMerge(e,o):e}),[e,o,r,i])},useThemeState=function(n){return function(o,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=t.useRef(null),s=usePointerState(e._objectSpread2(e._objectSpread2({},i),{},{ref:i.ref||u}),n),c=s.ref,a=s[n],f=useCompareState(o,r,Boolean(i.noMerge),a);return[c,f]}},a=useThemeState("hover"),f=useThemeState("active"),m=useThemeState("focus");exports.ReThemeContext=e.ReThemeContext,exports.addThemeEvent=e.addThemeEvent,exports.fireThemeEvent=e.fireThemeEvent,exports.getDefaultTheme=e.getDefaultTheme,exports.getMergeSizes=e.getMergeSizes,exports.getSize=e.getSize,exports.getSizeMap=e.getSizeMap,exports.removeThemeEvent=e.removeThemeEvent,exports.setDefaultTheme=e.setDefaultTheme,exports.setRNPlatform=e.setRNPlatform,exports.setSizes=e.setSizes,exports.useTheme=e.useTheme,exports.ReThemeProvider=ReThemeProvider,exports.setRNDimensions=function(e){},exports.useDimensions=function(){var n=t.useState(e.Dimensions.get("window")),o=e._slicedToArray(n,2),r=o[0],i=o[1],onChange=function(e){var t=e.window,n=t.width,o=t.height,r=t.scale,u=t.fontScale;i({width:n,height:o,scale:r,fontScale:u})};return t.useEffect((function(){return e.Dimensions.addEventListener("change",onChange),function(){return onChange.shouldUnmount=!0,e.Dimensions.removeEventListener("change",onChange)}}),[]),r},exports.usePointerState=usePointerState,exports.useStyle=function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];var u=e.useTheme();return t.useMemo((function(){return u.get.apply(u,r)||n.noPropObj}),[u].concat(r))},exports.useStylesCallback=function(o){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.noPropArr,i=arguments.length>2?arguments[2]:void 0,u=t.useCallback(o,r),s=e.useTheme(),c=!(!i||!n.isObj(i)||n.isEmptyColl(i))&&i;return t.useMemo((function(){return n.checkCall.apply(void 0,[u,s,c].concat(e._toConsumableArray(r)))||n.noPropObj}),[s,u,c])},exports.useThemeActive=f,exports.useThemeFocus=m,exports.useThemeHover=a,exports.withTheme=function(t){return function(n){return o.default.createElement(e.ReThemeContext.Consumer,null,(function(r){return o.default.createElement(t,e._extends({theme:r},n))}))}};
//# sourceMappingURL=index.js.map
