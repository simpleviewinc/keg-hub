"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,n,o=require("@keg-hub/jsutils"),r=require("./useTheme-f0ffcb5c.js"),u=require("react"),i=(e=u)&&"object"==typeof e&&"default"in e?e.default:e,s=!1;r.hasDomAccess()&&(t=0,n=function(){t=Date.now(),s&&(s=!1)},document.addEventListener("touchstart",n,!0),document.addEventListener("touchmove",n,!0),document.addEventListener("mousemove",(function(){!s&&Date.now()-t>1e3&&(s=!0)}),!0));var useEventCallBacks=function(e){var t,n=e.pointerState,i=e.onEvent,c=e.offEvent,a=e.onName,f=e.offName,v=u.useState(!1),m=r._slicedToArray(v,2),h=m[0],l=m[1],d=u.useCallback((function(e){o.checkCall(c,e),l(!1)}),[h,l,c]),p=u.useCallback((function(e){("hover"!==n||s)&&(o.checkCall(i,e),l(!0),"active"===n&&document.addEventListener(f,d,{once:!0}))}),[n,h,l,i]);return t={},r._defineProperty(t,n,h),r._defineProperty(t,a,p),r._defineProperty(t,f,d),t},useElementEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.noOpObj,t=arguments.length>1?arguments[1]:void 0,n="hover"===t?useEventCallBacks({pointerState:t,onName:"onPointerIn",offName:"onPointerOut",onEvent:e.onPointerIn,offEvent:e.onPointerOut}):o.noOpObj,r=n.hover,i=void 0!==r&&r,s=n.onPointerIn,c=n.onPointerOut,a="focus"===t?useEventCallBacks({pointerState:t,onName:"onFocus",offName:"onBlur",onEvent:e.onFocus,offEvent:e.onBlur}):o.noOpObj,f=a.focus,v=void 0!==f&&f,m=a.onFocus,h=a.onBlur,l="active"===t?useEventCallBacks({pointerState:t,onName:"onPointerDown",offName:"mouseup",onEvent:e.onPointerDown,offEvent:e.onMouseUp}):o.noOpObj,d=l.active,p=void 0!==d&&d,g=l.onPointerDown;return u.useMemo((function(){return{active:p,focus:v,hover:i,events:"hover"===t?{pointerover:s,pointerout:c}:"focus"===t?{focus:m,blur:h}:{pointerdown:g}}}),[p,v,i,h,m,g,s,c,e.ref,t])},loopElementEvents=function(e,t,n){Object.entries(t).map((function(t){var o=r._slicedToArray(t,2),u=o[0],i=o[1];return e[n](u,i)}))},createCBRef=function(e,t){var n=u.useRef(null),r=u.useCallback((function(t){n.current=t,o.isFunc(e)?e(t):e&&(e.current=t)}),[n.current,e,e.current]);return u.useEffect((function(){return n.current&&loopElementEvents(n.current,t,"addEventListener"),function(){n.current&&loopElementEvents(n.current,t,"removeEventListener")}}),[n.current,t]),r},usePointerState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.noOpObj,t=arguments.length>1?arguments[1]:void 0,n=useElementEvents(e,t),r=n.events,u=n.hover,i=n.active,s=n.focus;return{hover:u,focus:s,active:i,events:r,ref:createCBRef(e.ref,r)}},useCompareState=function(e,t,n,r){return u.useMemo((function(){return r?n?t:o.deepMerge(e,t):e}),[e,t,n,r])},useThemeState=function(e){return function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=u.useRef(null),s=usePointerState(r._objectSpread2(r._objectSpread2({},o),{},{ref:o.ref||i}),e),c=s.ref,a=s[e],f=useCompareState(t,n,Boolean(o.noMerge),a);return[c,f]}},c=useThemeState("hover"),a=useThemeState("active"),f=useThemeState("focus");exports.ReThemeContext=r.ReThemeContext,exports.addThemeEvent=r.addThemeEvent,exports.fireThemeEvent=r.fireThemeEvent,exports.getDefaultTheme=r.getDefaultTheme,exports.getMergeSizes=r.getMergeSizes,exports.getSize=r.getSize,exports.getSizeMap=r.getSizeMap,exports.removeThemeEvent=r.removeThemeEvent,exports.setDefaultTheme=r.setDefaultTheme,exports.setRNPlatform=r.setRNPlatform,exports.setSizes=r.setSizes,exports.useTheme=r.useTheme,exports.ReThemeProvider=function(e){var t=e.children,n=e.theme,s=e.merge,c=e.platforms,a=Boolean(s||!s&&!1!==s)||!1,f=u.useState(r.Dimensions.get("window")),v=r._slicedToArray(f,2),m=v[0],h=v[1],onChange=function(e){var t=e.window,n=t.width,u=t.height,i=t.scale,s=t.fontScale,c=r.getSize(n);if(c){var a=c[0],f=r.getCurrentTheme();a!==o.get(f,["RTMeta","key"])&&h({width:n,height:u,scale:i,fontScale:s})}};u.useEffect((function(){return r.Dimensions.addEventListener("change",onChange),function(){r.Dimensions.removeEventListener("change",onChange)}}),[]);var l=u.useMemo((function(){return r.buildTheme(n,m.width,m.height,a&&r.getDefaultTheme(),c)}),[n,m.width,m.height,a,c]);return i.createElement(r.ReThemeContext.Provider,{value:l},t)},exports.setRNDimensions=function(e){},exports.useDimensions=function(){var e=u.useState(r.Dimensions.get("window")),t=r._slicedToArray(e,2),n=t[0],o=t[1],onChange=function(e){var t=e.window,n=t.width,r=t.height,u=t.scale,i=t.fontScale;o({width:n,height:r,scale:u,fontScale:i})};return u.useEffect((function(){return r.Dimensions.addEventListener("change",onChange),function(){return onChange.shouldUnmount=!0,r.Dimensions.removeEventListener("change",onChange)}}),[]),n},exports.usePointerState=usePointerState,exports.useStyle=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.useTheme();return u.useMemo((function(){return i.get.apply(i,t)||o.noPropObj}),[i].concat(t))},exports.useStylesCallback=function(e,t,n){var i=u.useCallback(e,t||[]),s=!(!n||!o.isObj(n)||o.isEmptyColl(n))&&n,c=r.useTheme();return u.useMemo((function(){return o.checkCall.apply(void 0,[i,c,s].concat(r._toConsumableArray(t)))||{}}),[c,i,s])},exports.useThemeActive=a,exports.useThemeFocus=f,exports.useThemeHover=c,exports.withTheme=function(e){return function(t){return i.createElement(r.ReThemeContext.Consumer,null,(function(n){return i.createElement(e,r._extends({theme:n},t))}))}};
//# sourceMappingURL=index.js.map
