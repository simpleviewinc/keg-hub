"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var e,t=require("@keg-hub/jsutils"),r=require("./useTheme-5b3bfada.js"),n=require("react"),o=_interopDefault(n),i=_interopDefault(require("react-native-web/dist/modules/prefixStyles")),a=_interopDefault(require("react-native-web/dist/exports/StyleSheet/flattenStyle")),c=_interopDefault(require("react-native-web/dist/exports/StyleSheet/createReactDOMStyle")),s=_interopDefault(require("react-native-web/dist/exports/StyleSheet/createCompileableStyle")),l={important:[],filter:["aspectRatio","elevation","overlayColor","resizeMode","tintColor","backgroundSize","animationKeyframes","placeholderTextColor","pointerEvents","scrollbarWidth"]},u=t.hasDomAccess(),f=new Set,getKegSheet=function(){return e=e||document.head.querySelector(r.Constants.KEG_STYLES_TAG_ID)},getSelector=function(e,r,n){var filterWithPrefix=function(e){return e&&n?e.startsWith(n):e},o=!!t.exists(e)&&(t.isArr(e)?e.filter(filterWithPrefix).pop():t.isStr(e)&&e.split(" ").filter(filterWithPrefix).pop()),i="keg-".concat(t.hashString(r));return{hashClass:i,selector:o?".".concat(o.trim(),".").concat(i).trim():".".concat(i).trim()}},addStylesToDom=function(e,t){if(u&&t&&!function(e){return f.has(e)}(e)){f.add(e);var r=getKegSheet();r.sheet.insertRule("@media all {".concat(t.all,"}"))}};r.addThemeEvent(r.Constants.BUILD_EVENT,(function(){f.clear(),getKegSheet().textContent=""})),function(){if(u){if(e=document.head.querySelector(r.Constants.KEG_STYLES_TAG_ID))return e;(e=document.createElement("style")).id=r.Constants.KEG_STYLES_TAG_ID,document.head.append(e)}}();var d=Object.freeze({}),createBlock=function(e,r){var n=l.important.concat(null==r?void 0:r.important),o=i(c(e)),a=Object.keys(o).map((function(e){var r=function(e,t,r){return r.includes(e)?"".concat(t," !important"):t}(e,o[e],n),i=t.hyphenator(e);return t.isArr(r)?r.map((function(e){return"".concat(i,":").concat(e)})).join(";"):"".concat(i,":").concat(r)})).sort().join(";");return"{".concat(a,"}")},convertToCss=function(e,r){return t.flatArr(t.eitherArr(e,[e])).reduce((function(e,n){if(!t.isObj(n))return e;var o=function(e,r){var n=t.isArr(r)?l.filter.concat(r):l.filter;return{style:t.omitKeys(e,n),filtered:t.pickKeys(e,n)}}(n,null==r?void 0:r.filter),i=o.style,c=o.filtered;Object.assign(e.filtered,c);var u=a(i),f=s(u);return e.blocks.push(createBlock(f,r)),e}),{blocks:[],filtered:{}})},useStyleTag=function(e){var o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;c=t.isObj(c)?c:d;var s=r.useTheme(),l=null==s||null===(o=s.RTMeta)||void 0===o?void 0:o.size,u=null==s||null===(i=s.RTMeta)||void 0===i?void 0:i.key;return n.useMemo((function(){var r=convertToCss(e,c),n=r.blocks,o=r.filtered,i=getSelector(a,n.join(""),"keg"),s=i.hashClass,l=i.selector,u=n.reduce((function(e,t){var r="".concat(l).concat(t);return e.all+=r,e.rules.push(r),e}),{all:"",rules:[]});return addStylesToDom(l,u),{css:u,filteredStyle:o,classList:t.eitherArr(a,[a]).concat([s])}}),[e,a,l,u,c])},p=o.forwardRef((function(e,n){var i=e.Component,a=e.children,c=e.config,s=e.className,l=e.style,u=r._objectWithoutProperties(e,["Component","children","config","className","style"]),f=c.className,d=useStyleTag(l,s||f,c),p=d.classList,h=d.filteredStyle;return o.createElement(i,r._extends({},u,{style:h,ref:n,className:t.isArr(p)?p.join(" "):p}),a)}));exports.StyleInjector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.forwardRef((function(n,i){var a=n.style,c=r._objectWithoutProperties(n,["style"]);return a?o.createElement(p,r._extends({},c,{style:a,config:t,Component:e,ref:i})):o.createElement(e,r._extends({},c,{style:a,ref:i}))}))},exports.convertToCss=convertToCss,exports.createBlock=createBlock,exports.useStyleTag=useStyleTag;
//# sourceMappingURL=styleInjector-4bee8736.js.map
