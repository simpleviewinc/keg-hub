"use strict";var e=require("./useTheme-5fc654c9.js"),t=require("react"),r=require("@keg-hub/jsutils"),n=require("react-native-web/dist/modules/prefixStyles"),a=require("react-native-web/dist/exports/StyleSheet/flattenStyle"),o=require("react-native-web/dist/exports/StyleSheet/createReactDOMStyle"),i=require("react-native-web/dist/exports/StyleSheet/createCompileableStyle");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c,l=_interopDefaultLegacy(t),s=_interopDefaultLegacy(n),u=_interopDefaultLegacy(a),f=_interopDefaultLegacy(o),d=_interopDefaultLegacy(i),p={important:[],filter:["aspectRatio","elevation","overlayColor","resizeMode","tintColor","backgroundSize","animationKeyframes","placeholderTextColor","pointerEvents","scrollbarWidth"]},y=r.hasDomAccess(),h=new Set,getKegSheet=function(){return c=c||document.head.querySelector(e.Constants.KEG_STYLES_TAG_ID)},getSelector=function(e,t,n){var filterWithPrefix=function(e){return e&&n?e.startsWith(n):e},a=!!r.exists(e)&&(r.isArr(e)?e.filter(filterWithPrefix).pop():r.isStr(e)&&e.split(" ").filter(filterWithPrefix).pop()),o="keg-".concat(r.hashString(t));return{hashClass:o,selector:a?".".concat(a.trim(),".").concat(o).trim():".".concat(o).trim()}},addStylesToDom=function(e,t){y&&t&&!function(e){return h.has(e)}(e)&&(h.add(e),getKegSheet().sheet.insertRule("@media all {".concat(t.all,"}")))};e.addThemeEvent(e.Constants.BUILD_EVENT,(function(){h.clear(),getKegSheet().textContent=""})),function(){if(y){if(c=document.head.querySelector(e.Constants.KEG_STYLES_TAG_ID))return c;(c=document.createElement("style")).id=e.Constants.KEG_STYLES_TAG_ID,document.head.append(c)}}();var m=Object.freeze({}),createBlock=function(e,t){var n=p.important.concat(null==t?void 0:t.important),a=s.default(f.default(e)),o=Object.keys(a).map((function(e){var t=function(e,t,r){return r.includes(e)?"".concat(t," !important"):t}(e,a[e],n),o=r.hyphenator(e);return r.isArr(t)?t.map((function(e){return"".concat(o,":").concat(e)})).join(";"):"".concat(o,":").concat(t)})).sort().join(";");return"{".concat(o,"}")},convertToCss=function(e,t){return r.flatArr(r.eitherArr(e,[e])).reduce((function(e,n){if(!r.isObj(n))return e;var a=function(e,t){var n=r.isArr(t)?p.filter.concat(t):p.filter;return{style:r.omitKeys(e,n),filtered:r.pickKeys(e,n)}}(n,null==t?void 0:t.filter),o=a.style,i=a.filtered;Object.assign(e.filtered,i);var c=u.default(o),l=d.default(c);return e.blocks.push(createBlock(l,t)),e}),{blocks:[],filtered:{}})},useStyleTag=function(n){var a,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0;c=r.isObj(c)?c:m;var l=e.useTheme(),s=null==l||null===(a=l.RTMeta)||void 0===a?void 0:a.size,u=null==l||null===(o=l.RTMeta)||void 0===o?void 0:o.key;return t.useMemo((function(){var e=convertToCss(n,c),t=e.blocks,a=e.filtered,o=getSelector(i,t.join(""),"keg"),l=o.hashClass,s=o.selector,u=t.reduce((function(e,t){var r="".concat(s).concat(t);return e.all+=r,e.rules.push(r),e}),{all:"",rules:[]});return addStylesToDom(s,u),{css:u,filteredStyle:a,classList:r.eitherArr(i,[i]).concat([l])}}),[n,i,s,u,c])},v=["Component","children","config","className","style"],S=["style"],_=l.default.forwardRef((function(t,n){var a=t.Component,o=t.children,i=t.config,c=t.className,s=t.style,u=e._objectWithoutProperties(t,v),f=i.className,d=useStyleTag(s,c||f,i),p=d.classList,y=d.filteredStyle;return l.default.createElement(a,e._extends({},u,{style:y,className:r.isStr(a)?p.join(" "):p,ref:n}),o)}));exports.StyleInjector=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.default.forwardRef((function(n,a){var o=n.style,i=e._objectWithoutProperties(n,S);return o?l.default.createElement(_,e._extends({},i,{style:o,config:r,Component:t,ref:a})):l.default.createElement(t,e._extends({},i,{style:o,ref:a}))}))},exports.convertToCss=convertToCss,exports.createBlock=createBlock,exports.useStyleTag=useStyleTag;
//# sourceMappingURL=styleInjector-77e35799.js.map
